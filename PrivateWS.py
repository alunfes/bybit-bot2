from SystemFlg import SystemFlg
from Account import Account

import websocket
import json
import time
import threading
import urllib
import hmac
import hashlib
from collections import deque
from datetime import datetime
import dateutil
import pytz
import copy
import pprint
from collections import deque



'''
{'success': True, 'ret_msg': '', 'conn_id': '202b5469-e69a-498c-8de3-ec3d437531c3', 'request': {'op': 'auth', 'args': ['edoITyQoHdZ2Flg2MI', '1600129831000', '7f67696903611da9f84e281413a5c63c466db31e5c39fff2436006982f96cc09']}}
{'success': True, 'ret_msg': '', 'conn_id': '202b5469-e69a-498c-8de3-ec3d437531c3', 'request': {'op': 'subscribe', 'args': ['position', 'execution', 'order', 'stop_order']}}
{'topic': 'order', 'data': [{'order_id': '6977ecb8-abdb-413e-bd3f-062fce8cea48', 'order_link_id': '', 'symbol': 'BTCUSD', 'side': 'Buy', 'order_type': 'Limit', 'price': '10653.5', 'qty': 100000, 'time_in_force': 'GoodTillCancel', 'create_type': 'CreateByUser', 'cancel_type': '', 'order_status': 'New', 'leaves_qty': 100000, 'cum_exec_qty': 0, 'cum_exec_value': '0', 'cum_exec_fee': '0', 'timestamp': '2020-09-15T00:31:26.912Z', 'take_profit': '0', 'stop_loss': '0', 'trailing_stop': '0', 'last_exec_price': '0'}]}
{'topic': 'position', 'data': [{'user_id': 733028, 'symbol': 'BTCUSD', 'size': 0, 'side': 'None', 'position_value': '0', 'entry_price': '0', 'liq_price': '0', 'bust_price': '0', 'leverage': '100', 'order_margin': '0.10801615', 'position_margin': '0', 'available_balance': '5.2845289', 'take_profit': '0', 'stop_loss': '0', 'realised_pnl': '0', 'trailing_stop': '0', 'trailing_active': '0', 'wallet_balance': '5.39254505', 'risk_id': 1, 'occ_closing_fee': '0', 'occ_funding_fee': '0', 'auto_add_margin': 1, 'cum_realised_pnl': '-0.74492485', 'position_status': 'Normal', 'position_seq': 1697729776}]}
{'topic': 'order', 'data': [{'order_id': '6977ecb8-abdb-413e-bd3f-062fce8cea48', 'order_link_id': '', 'symbol': 'BTCUSD', 'side': 'Buy', 'order_type': 'Limit', 'price': '10653.5', 'qty': 100000, 'time_in_force': 'GoodTillCancel', 'create_type': 'CreateByUser', 'cancel_type': '', 'order_status': 'PartiallyFilled', 'leaves_qty': 71745, 'cum_exec_qty': 28255, 'cum_exec_value': '2.65218003', 'cum_exec_fee': '-0.00066304', 'timestamp': '2020-09-15T00:31:39.117Z', 'take_profit': '0', 'stop_loss': '0', 'trailing_stop': '0', 'last_exec_price': '10653.5'}]}
{'topic': 'position', 'data': [{'user_id': 733028, 'symbol': 'BTCUSD', 'size': 28255, 'side': 'Buy', 'position_value': '2.65218003', 'entry_price': '10653.500019', 'liq_price': '3555', 'bust_price': '3549', 'leverage': '100', 'order_margin': '0.07749619', 'position_margin': '0.02652181', 'available_balance': '5.28321904', 'take_profit': '0', 'stop_loss': '0', 'realised_pnl': '0.00066304', 'trailing_stop': '0', 'trailing_active': '0', 'wallet_balance': '5.39320809', 'risk_id': 1, 'occ_closing_fee': '0.00597105', 'occ_funding_fee': '0', 'auto_add_margin': 1, 'cum_realised_pnl': '-0.74426181', 'position_status': 'Normal', 'position_seq': 1697729776}]}
{'topic': 'execution', 'data': [{'symbol': 'BTCUSD', 'side': 'Buy', 'order_id': '6977ecb8-abdb-413e-bd3f-062fce8cea48', 'exec_id': '14cc58c1-41ec-5ef5-9336-74f60850e529', 'order_link_id': '', 'price': '10653.5', 'order_qty': 100000, 'exec_type': 'Trade', 'exec_qty': 28255, 'exec_fee': '-0.00066304', 'leaves_qty': 71745, 'is_maker': True, 'trade_time': '2020-09-15T00:31:39.117Z'}]}
{'topic': 'position', 'data': [{'user_id': 733028, 'symbol': 'BTCUSD', 'size': 28255, 'side': 'Buy', 'position_value': '2.65218003', 'entry_price': '10653.500019', 'liq_price': '3555', 'bust_price': '3549', 'leverage': '100', 'order_margin': '0.07749619', 'position_margin': '0.02652181', 'available_balance': '5.28321904', 'take_profit': '0', 'stop_loss': '0', 'realised_pnl': '0.00066304', 'trailing_stop': '0', 'trailing_active': '0', 'wallet_balance': '5.39320809', 'risk_id': 1, 'occ_closing_fee': '0.00597105', 'occ_funding_fee': '0', 'auto_add_margin': 1, 'cum_realised_pnl': '-0.74426181', 'position_status': 'Normal', 'position_seq': 1697729776}]}
{'topic': 'order', 'data': [{'order_id': '6977ecb8-abdb-413e-bd3f-062fce8cea48', 'order_link_id': '', 'symbol': 'BTCUSD', 'side': 'Buy', 'order_type': 'Limit', 'price': '10653.5', 'qty': 100000, 'time_in_force': 'GoodTillCancel', 'create_type': 'CreateByUser', 'cancel_type': '', 'order_status': 'PartiallyFilled', 'leaves_qty': 66766, 'cum_exec_qty': 33234, 'cum_exec_value': '3.11953817', 'cum_exec_fee': '-0.00077987', 'timestamp': '2020-09-15T00:31:41.621Z', 'take_profit': '0', 'stop_loss': '0', 'trailing_stop': '0', 'last_exec_price': '10653.5'}]}
{'topic': 'execution', 'data': [{'symbol': 'BTCUSD', 'side': 'Buy', 'order_id': '6977ecb8-abdb-413e-bd3f-062fce8cea48', 'exec_id': 'b147bd74-7853-55cf-86d2-23c85e18c74c', 'order_link_id': '', 'price': '10653.5', 'order_qty': 100000, 'exec_type': 'Trade', 'exec_qty': 4979, 'exec_fee': '-0.00011683', 'leaves_qty': 66766, 'is_maker': True, 'trade_time': '2020-09-15T00:31:41.621Z'}]}
{'topic': 'position', 'data': [{'user_id': 733028, 'symbol': 'BTCUSD', 'size': 33234, 'side': 'Buy', 'position_value': '3.11953817', 'entry_price': '10653.50003395', 'liq_price': '3948', 'bust_price': '3940.5', 'leverage': '100', 'order_margin': '0.07211806', 'position_margin': '0.03119539', 'available_balance': '5.283686', 'take_profit': '0', 'stop_loss': '0', 'realised_pnl': '0.00077987', 'trailing_stop': '0', 'trailing_active': '0', 'wallet_balance': '5.39332492', 'risk_id': 1, 'occ_closing_fee': '0.00632547', 'occ_funding_fee': '0', 'auto_add_margin': 1, 'cum_realised_pnl': '-0.74414498', 'position_status': 'Normal', 'position_seq': 1697729776}]}
{'topic': 'execution', 'data': [{'symbol': 'BTCUSD', 'side': 'Buy', 'order_id': '6977ecb8-abdb-413e-bd3f-062fce8cea48', 'exec_id': 'ca8c1a7c-1370-5efd-acd5-c941fa4c4a27', 'order_link_id': '', 'price': '10653.5', 'order_qty': 100000, 'exec_type': 'Trade', 'exec_qty': 1188, 'exec_fee': '-0.00002787', 'leaves_qty': 65578, 'is_maker': True, 'trade_time': '2020-09-15T00:31:42.324Z'}]}
{'topic': 'position', 'data': [{'user_id': 733028, 'symbol': 'BTCUSD', 'size': 34422, 'side': 'Buy', 'position_value': '3.23105081', 'entry_price': '10653.50006056', 'liq_price': '4035', 'bust_price': '4027.5', 'leverage': '100', 'order_margin': '0.07083483', 'position_margin': '0.03231051', 'available_balance': '5.28379739', 'take_profit': '0', 'stop_loss': '0', 'realised_pnl': '0.00080774', 'trailing_stop': '0', 'trailing_active': '0', 'wallet_balance': '5.39335279', 'risk_id': 1, 'occ_closing_fee': '0.00641006', 'occ_funding_fee': '0', 'auto_add_margin': 1, 'cum_realised_pnl': '-0.74411711', 'position_status': 'Normal', 'position_seq': 1697729776}]}
{'topic': 'order', 'data': [{'order_id': '6977ecb8-abdb-413e-bd3f-062fce8cea48', 'order_link_id': '', 'symbol': 'BTCUSD', 'side': 'Buy', 'order_type': 'Limit', 'price': '10653.5', 'qty': 100000, 'time_in_force': 'GoodTillCancel', 'create_type': 'CreateByUser', 'cancel_type': '', 'order_status': 'PartiallyFilled', 'leaves_qty': 65578, 'cum_exec_qty': 34422, 'cum_exec_value': '3.23105081', 'cum_exec_fee': '-0.00080774', 'timestamp': '2020-09-15T00:31:42.324Z', 'take_profit': '0', 'stop_loss': '0', 'trailing_stop': '0', 'last_exec_price': '10653.5'}]}
{'topic': 'order', 'data': [{'order_id': '6977ecb8-abdb-413e-bd3f-062fce8cea48', 'order_link_id': '', 'symbol': 'BTCUSD', 'side': 'Buy', 'order_type': 'Limit', 'price': '10653.5', 'qty': 100000, 'time_in_force': 'GoodTillCancel', 'create_type': 'CreateByUser', 'cancel_type': '', 'order_status': 'PartiallyFilled', 'leaves_qty': 58239, 'cum_exec_qty': 41761, 'cum_exec_value': '3.91993239', 'cum_exec_fee': '-0.00097996', 'timestamp': '2020-09-15T00:31:43.163Z', 'take_profit': '0', 'stop_loss': '0', 'trailing_stop': '0', 'last_exec_price': '10653.5'}]}
{'topic': 'execution', 'data': [{'symbol': 'BTCUSD', 'side': 'Buy', 'order_id': '6977ecb8-abdb-413e-bd3f-062fce8cea48', 'exec_id': 'e13ac0b2-36b9-548a-94db-7ef5ff70d02b', 'order_link_id': '', 'price': '10653.5', 'order_qty': 100000, 'exec_type': 'Trade', 'exec_qty': 7339, 'exec_fee': '-0.00017222', 'leaves_qty': 58239, 'is_maker': True, 'trade_time': '2020-09-15T00:31:43.163Z'}]}
{'topic': 'position', 'data': [{'user_id': 733028, 'symbol': 'BTCUSD', 'size': 41761, 'side': 'Buy', 'position_value': '3.91993239', 'entry_price': '10653.50007223', 'liq_price': '4527.5', 'bust_price': '4518', 'leverage': '100', 'order_margin': '0.06290753', 'position_margin': '0.03919933', 'available_balance': '5.28448571', 'take_profit': '0', 'stop_loss': '0', 'realised_pnl': '0.00097996', 'trailing_stop': '0', 'trailing_active': '0', 'wallet_balance': '5.39352501', 'risk_id': 1, 'occ_closing_fee': '0.00693244', 'occ_funding_fee': '0', 'auto_add_margin': 1, 'cum_realised_pnl': '-0.74394489', 'position_status': 'Normal', 'position_seq': 1697729776}]}
{'topic': 'order', 'data': [{'order_id': '6977ecb8-abdb-413e-bd3f-062fce8cea48', 'order_link_id': '', 'symbol': 'BTCUSD', 'side': 'Buy', 'order_type': 'Limit', 'price': '10653.5', 'qty': 100000, 'time_in_force': 'GoodTillCancel', 'create_type': 'CreateByUser', 'cancel_type': '', 'order_status': 'PartiallyFilled', 'leaves_qty': 45558, 'cum_exec_qty': 54442, 'cum_exec_value': '5.11024543', 'cum_exec_fee': '-0.00127753', 'timestamp': '2020-09-15T00:31:43.182Z', 'take_profit': '0', 'stop_loss': '0', 'trailing_stop': '0', 'last_exec_price': '10653.5'}]}
{'topic': 'order', 'data': [{'order_id': '6977ecb8-abdb-413e-bd3f-062fce8cea48', 'order_link_id': '', 'symbol': 'BTCUSD', 'side': 'Buy', 'order_type': 'Limit', 'price': '10653.5', 'qty': 100000, 'time_in_force': 'GoodTillCancel', 'create_type': 'CreateByUser', 'cancel_type': '', 'order_status': 'PartiallyFilled', 'leaves_qty': 37220, 'cum_exec_qty': 62780, 'cum_exec_value': '5.89289901', 'cum_exec_fee': '-0.00147319', 'timestamp': '2020-09-15T00:31:43.182Z', 'take_profit': '0', 'stop_loss': '0', 'trailing_stop': '0', 'last_exec_price': '10653.5'}]}
{'topic': 'position', 'data': [{'user_id': 733028, 'symbol': 'BTCUSD', 'size': 54442, 'side': 'Buy', 'position_value': '5.11024543', 'entry_price': '10653.50006095', 'liq_price': '5224.5', 'bust_price': '5211.5', 'leverage': '100', 'order_margin': '0.04921', 'position_margin': '0.05110246', 'available_balance': '5.28567523', 'take_profit': '0', 'stop_loss': '0', 'realised_pnl': '0.00127753', 'trailing_stop': '0', 'trailing_active': '0', 'wallet_balance': '5.39382258', 'risk_id': 1, 'occ_closing_fee': '0.00783489', 'occ_funding_fee': '0', 'auto_add_margin': 1, 'cum_realised_pnl': '-0.74364732', 'position_status': 'Normal', 'position_seq': 1697729776}]}
{'topic': 'position', 'data': [{'user_id': 733028, 'symbol': 'BTCUSD', 'size': 62780, 'side': 'Buy', 'position_value': '5.89289901', 'entry_price': '10653.50006736', 'liq_price': '5601', 'bust_price': '5586.5', 'leverage': '100', 'order_margin': '0.04020361', 'position_margin': '0.058929', 'available_balance': '5.28645727', 'take_profit': '0', 'stop_loss': '0', 'realised_pnl': '0.00147319', 'trailing_stop': '0', 'trailing_active': '0', 'wallet_balance': '5.39401824', 'risk_id': 1, 'occ_closing_fee': '0.00842836', 'occ_funding_fee': '0', 'auto_add_margin': 1, 'cum_realised_pnl': '-0.74345166', 'position_status': 'Normal', 'position_seq': 1697729776}]}
{'topic': 'execution', 'data': [{'symbol': 'BTCUSD', 'side': 'Buy', 'order_id': '6977ecb8-abdb-413e-bd3f-062fce8cea48', 'exec_id': '2ca68abe-7d33-5172-abef-291ef8945122', 'order_link_id': '', 'price': '10653.5', 'order_qty': 100000, 'exec_type': 'Trade', 'exec_qty': 12681, 'exec_fee': '-0.00029757', 'leaves_qty': 45558, 'is_maker': True, 'trade_time': '2020-09-15T00:31:43.182Z'}]}
{'topic': 'execution', 'data': [{'symbol': 'BTCUSD', 'side': 'Buy', 'order_id': '6977ecb8-abdb-413e-bd3f-062fce8cea48', 'exec_id': '9b378035-5007-58ba-8400-d73dee42a849', 'order_link_id': '', 'price': '10653.5', 'order_qty': 100000, 'exec_type': 'Trade', 'exec_qty': 8338, 'exec_fee': '-0.00019566', 'leaves_qty': 37220, 'is_maker': True, 'trade_time': '2020-09-15T00:31:43.182Z'}]}
{'topic': 'order', 'data': [{'order_id': '6977ecb8-abdb-413e-bd3f-062fce8cea48', 'order_link_id': '', 'symbol': 'BTCUSD', 'side': 'Buy', 'order_type': 'Limit', 'price': '10653.5', 'qty': 100000, 'time_in_force': 'GoodTillCancel', 'create_type': 'CreateByUser', 'cancel_type': '', 'order_status': 'Filled', 'leaves_qty': 0, 'cum_exec_qty': 100000, 'cum_exec_value': '9.38658653', 'cum_exec_fee': '-0.00234661', 'timestamp': '2020-09-15T00:31:43.185Z', 'take_profit': '0', 'stop_loss': '0', 'trailing_stop': '0', 'last_exec_price': '10653.5'}]}
{'topic': 'position', 'data': [{'user_id': 733028, 'symbol': 'BTCUSD', 'size': 100000, 'side': 'Buy', 'position_value': '9.38658653', 'entry_price': '10653.5000429', 'liq_price': '6792', 'bust_price': '6770.5', 'leverage': '100', 'order_margin': '0', 'position_margin': '0.09386587', 'available_balance': '5.28994832', 'take_profit': '0', 'stop_loss': '0', 'realised_pnl': '0.00234661', 'trailing_stop': '0', 'trailing_active': '0', 'wallet_balance': '5.39489166', 'risk_id': 1, 'occ_closing_fee': '0.01107747', 'occ_funding_fee': '0', 'auto_add_margin': 1, 'cum_realised_pnl': '-0.74257824', 'position_status': 'Normal', 'position_seq': 1697729776}]}
{'topic': 'execution', 'data': [{'symbol': 'BTCUSD', 'side': 'Buy', 'order_id': '6977ecb8-abdb-413e-bd3f-062fce8cea48', 'exec_id': '5f589eac-f415-5f80-b800-f5c8ac23839e', 'order_link_id': '', 'price': '10653.5', 'order_qty': 100000, 'exec_type': 'Trade', 'exec_qty': 37220, 'exec_fee': '-0.00087342', 'leaves_qty': 0, 'is_maker': True, 'trade_time': '2020-09-15T00:31:43.185Z'}]}
{'topic': 'order', 'data': [{'order_id': 'e9d1e2f3-40e9-4ee5-86b3-d647dac59b72', 'order_link_id': '', 'symbol': 'BTCUSD', 'side': 'Sell', 'order_type': 'Limit', 'price': '10653.5', 'qty': 100000, 'time_in_force': 'GoodTillCancel', 'create_type': 'CreateByUser', 'cancel_type': '', 'order_status': 'New', 'leaves_qty': 100000, 'cum_exec_qty': 0, 'cum_exec_value': '0', 'cum_exec_fee': '0', 'timestamp': '2020-09-15T00:31:59.942Z', 'take_profit': '0', 'stop_loss': '0', 'trailing_stop': '0', 'last_exec_price': '0'}]}
{'topic': 'position', 'data': [{'user_id': 733028, 'symbol': 'BTCUSD', 'size': 100000, 'side': 'Buy', 'position_value': '9.38658653', 'entry_price': '10653.5000429', 'liq_price': '6792', 'bust_price': '6770.5', 'leverage': '100', 'order_margin': '0', 'position_margin': '0.09386587', 'available_balance': '5.28994832', 'take_profit': '0', 'stop_loss': '0', 'realised_pnl': '0.00234661', 'trailing_stop': '0', 'trailing_active': '0', 'wallet_balance': '5.39489166', 'risk_id': 1, 'occ_closing_fee': '0.01107747', 'occ_funding_fee': '0', 'auto_add_margin': 1, 'cum_realised_pnl': '-0.74257824', 'position_status': 'Normal', 'position_seq': 1697729776}]}
{'topic': 'order', 'data': [{'order_id': 'e9d1e2f3-40e9-4ee5-86b3-d647dac59b72', 'order_link_id': '', 'symbol': 'BTCUSD', 'side': 'Sell', 'order_type': 'Limit', 'price': '10653.5', 'qty': 100000, 'time_in_force': 'GoodTillCancel', 'create_type': 'CreateByUser', 'cancel_type': '', 'order_status': 'PartiallyFilled', 'leaves_qty': 99800, 'cum_exec_qty': 200, 'cum_exec_value': '0.01877317', 'cum_exec_fee': '-0.00000469', 'timestamp': '2020-09-15T00:32:58.294Z', 'take_profit': '0', 'stop_loss': '0', 'trailing_stop': '0', 'last_exec_price': '10653.5'}]}
{'topic': 'execution', 'data': [{'symbol': 'BTCUSD', 'side': 'Sell', 'order_id': 'e9d1e2f3-40e9-4ee5-86b3-d647dac59b72', 'exec_id': '2325e718-1b98-5f8d-8f3e-67d0ab7d67c5', 'order_link_id': '', 'price': '10653.5', 'order_qty': 100000, 'exec_type': 'Trade', 'exec_qty': 200, 'exec_fee': '-0.00000469', 'leaves_qty': 99800, 'is_maker': True, 'trade_time': '2020-09-15T00:32:58.294Z'}]}
{'topic': 'position', 'data': [{'user_id': 733028, 'symbol': 'BTCUSD', 'size': 99800, 'side': 'Buy', 'position_value': '9.36781336', 'entry_price': '10653.5000429', 'liq_price': '6787', 'bust_price': '6765.5', 'leverage': '100', 'order_margin': '0', 'position_margin': '0.09367814', 'available_balance': '5.29015472', 'take_profit': '0', 'stop_loss': '0', 'realised_pnl': '0.0023513', 'trailing_stop': '0', 'trailing_active': '0', 'wallet_balance': '5.39489635', 'risk_id': 1, 'occ_closing_fee': '0.01106349', 'occ_funding_fee': '0', 'auto_add_margin': 1, 'cum_realised_pnl': '-0.74257355', 'position_status': 'Normal', 'position_seq': 1697729776}]}
{'topic': 'order', 'data': [{'order_id': 'e9d1e2f3-40e9-4ee5-86b3-d647dac59b72', 'order_link_id': '', 'symbol': 'BTCUSD', 'side': 'Sell', 'order_type': 'Limit', 'price': '10653.5', 'qty': 100000, 'time_in_force': 'GoodTillCancel', 'create_type': 'CreateByUser', 'cancel_type': '', 'order_status': 'PartiallyFilled', 'leaves_qty': 99700, 'cum_exec_qty': 300, 'cum_exec_value': '0.02815975', 'cum_exec_fee': '-0.00000703', 'timestamp': '2020-09-15T00:32:58.311Z', 'take_profit': '0', 'stop_loss': '0', 'trailing_stop': '0', 'last_exec_price': '10653.5'}]}
{'topic': 'position', 'data': [{'user_id': 733028, 'symbol': 'BTCUSD', 'size': 99700, 'side': 'Buy', 'position_value': '9.35842678', 'entry_price': '10653.5000429', 'liq_price': '6784.5', 'bust_price': '6763', 'leverage': '100', 'order_margin': '0', 'position_margin': '0.09358427', 'available_balance': '5.29025793', 'take_profit': '0', 'stop_loss': '0', 'realised_pnl': '0.00235364', 'trailing_stop': '0', 'trailing_active': '0', 'wallet_balance': '5.39489869', 'risk_id': 1, 'occ_closing_fee': '0.01105649', 'occ_funding_fee': '0', 'auto_add_margin': 1, 'cum_realised_pnl': '-0.74257121', 'position_status': 'Normal', 'position_seq': 1697729776}]}
{'topic': 'execution', 'data': [{'symbol': 'BTCUSD', 'side': 'Sell', 'order_id': 'e9d1e2f3-40e9-4ee5-86b3-d647dac59b72', 'exec_id': '4a42a347-6f66-5a26-bd8c-e6ec23cf0635', 'order_link_id': '', 'price': '10653.5', 'order_qty': 100000, 'exec_type': 'Trade', 'exec_qty': 100, 'exec_fee': '-0.00000234', 'leaves_qty': 99700, 'is_maker': True, 'trade_time': '2020-09-15T00:32:58.311Z'}]}
{'topic': 'execution', 'data': [{'symbol': 'BTCUSD', 'side': 'Sell', 'order_id': 'e9d1e2f3-40e9-4ee5-86b3-d647dac59b72', 'exec_id': '4c0ef6be-ad1a-5464-ac1a-8fa2890d72c9', 'order_link_id': '', 'price': '10653.5', 'order_qty': 100000, 'exec_type': 'Trade', 'exec_qty': 1, 'exec_fee': '-0.00000002', 'leaves_qty': 99699, 'is_maker': True, 'trade_time': '2020-09-15T00:33:01.201Z'}]}
{'topic': 'order', 'data': [{'order_id': 'e9d1e2f3-40e9-4ee5-86b3-d647dac59b72', 'order_link_id': '', 'symbol': 'BTCUSD', 'side': 'Sell', 'order_type': 'Limit', 'price': '10653.5', 'qty': 100000, 'time_in_force': 'GoodTillCancel', 'create_type': 'CreateByUser', 'cancel_type': '', 'order_status': 'PartiallyFilled', 'leaves_qty': 99699, 'cum_exec_qty': 301, 'cum_exec_value': '0.02825361', 'cum_exec_fee': '-0.00000705', 'timestamp': '2020-09-15T00:33:01.201Z', 'take_profit': '0', 'stop_loss': '0', 'trailing_stop': '0', 'last_exec_price': '10653.5'}]}
{'topic': 'position', 'data': [{'user_id': 733028, 'symbol': 'BTCUSD', 'size': 99699, 'side': 'Buy', 'position_value': '9.35833292', 'entry_price': '10653.5000429', 'liq_price': '6784.5', 'bust_price': '6763', 'leverage': '100', 'order_margin': '0', 'position_margin': '0.09358333', 'available_balance': '5.290259', 'take_profit': '0', 'stop_loss': '0', 'realised_pnl': '0.00235366', 'trailing_stop': '0', 'trailing_active': '0', 'wallet_balance': '5.39489871', 'risk_id': 1, 'occ_closing_fee': '0.01105638', 'occ_funding_fee': '0', 'auto_add_margin': 1, 'cum_realised_pnl': '-0.74257119', 'position_status': 'Normal', 'position_seq': 1697729776}]}
{'topic': 'order', 'data': [{'order_id': 'e9d1e2f3-40e9-4ee5-86b3-d647dac59b72', 'order_link_id': '', 'symbol': 'BTCUSD', 'side': 'Sell', 'order_type': 'Limit', 'price': '10653.5', 'qty': 100000, 'time_in_force': 'GoodTillCancel', 'create_type': 'CreateByUser', 'cancel_type': '', 'order_status': 'PartiallyFilled', 'leaves_qty': 99599, 'cum_exec_qty': 401, 'cum_exec_value': '0.03764019', 'cum_exec_fee': '-0.00000939', 'timestamp': '2020-09-15T00:33:01.974Z', 'take_profit': '0', 'stop_loss': '0', 'trailing_stop': '0', 'last_exec_price': '10653.5'}]}
{'topic': 'position', 'data': [{'user_id': 733028, 'symbol': 'BTCUSD', 'size': 99599, 'side': 'Buy', 'position_value': '9.34894634', 'entry_price': '10653.5000429', 'liq_price': '6782', 'bust_price': '6760.5', 'leverage': '100', 'order_margin': '0', 'position_margin': '0.09348947', 'available_balance': '5.29036221', 'take_profit': '0', 'stop_loss': '0', 'realised_pnl': '0.002356', 'trailing_stop': '0', 'trailing_active': '0', 'wallet_balance': '5.39490105', 'risk_id': 1, 'occ_closing_fee': '0.01104937', 'occ_funding_fee': '0', 'auto_add_margin': 1, 'cum_realised_pnl': '-0.74256885', 'position_status': 'Normal', 'position_seq': 1697729776}]}
{'topic': 'execution', 'data': [{'symbol': 'BTCUSD', 'side': 'Sell', 'order_id': 'e9d1e2f3-40e9-4ee5-86b3-d647dac59b72', 'exec_id': 'e964be00-fc39-510d-b608-2b8fe75ffca6', 'order_link_id': '', 'price': '10653.5', 'order_qty': 100000, 'exec_type': 'Trade', 'exec_qty': 100, 'exec_fee': '-0.00000234', 'leaves_qty': 99599, 'is_maker': True, 'trade_time': '2020-09-15T00:33:01.974Z'}]}
{'topic': 'execution', 'data': [{'symbol': 'BTCUSD', 'side': 'Sell', 'order_id': 'e9d1e2f3-40e9-4ee5-86b3-d647dac59b72', 'exec_id': 'c6a9001f-d17d-519b-a085-91fb1a954d44', 'order_link_id': '', 'price': '10653.5', 'order_qty': 100000, 'exec_type': 'Trade', 'exec_qty': 100, 'exec_fee': '-0.00000234', 'leaves_qty': 99499, 'is_maker': True, 'trade_time': '2020-09-15T00:33:02.873Z'}]}
{'topic': 'order', 'data': [{'order_id': 'e9d1e2f3-40e9-4ee5-86b3-d647dac59b72', 'order_link_id': '', 'symbol': 'BTCUSD', 'side': 'Sell', 'order_type': 'Limit', 'price': '10653.5', 'qty': 100000, 'time_in_force': 'GoodTillCancel', 'create_type': 'CreateByUser', 'cancel_type': '', 'order_status': 'PartiallyFilled', 'leaves_qty': 99499, 'cum_exec_qty': 501, 'cum_exec_value': '0.04702677', 'cum_exec_fee': '-0.00001173', 'timestamp': '2020-09-15T00:33:02.873Z', 'take_profit': '0', 'stop_loss': '0', 'trailing_stop': '0', 'last_exec_price': '10653.5'}]}
{'topic': 'position', 'data': [{'user_id': 733028, 'symbol': 'BTCUSD', 'size': 99499, 'side': 'Buy', 'position_value': '9.33955976', 'entry_price': '10653.5000429', 'liq_price': '6779.5', 'bust_price': '6758', 'leverage': '100', 'order_margin': '0', 'position_margin': '0.0933956', 'available_balance': '5.29046543', 'take_profit': '0', 'stop_loss': '0', 'realised_pnl': '0.00235834', 'trailing_stop': '0', 'trailing_active': '0', 'wallet_balance': '5.39490339', 'risk_id': 1, 'occ_closing_fee': '0.01104236', 'occ_funding_fee': '0', 'auto_add_margin': 1, 'cum_realised_pnl': '-0.74256651', 'position_status': 'Normal', 'position_seq': 1697729776}]}
{'topic': 'order', 'data': [{'order_id': 'e9d1e2f3-40e9-4ee5-86b3-d647dac59b72', 'order_link_id': '', 'symbol': 'BTCUSD', 'side': 'Sell', 'order_type': 'Limit', 'price': '10653.5', 'qty': 100000, 'time_in_force': 'GoodTillCancel', 'create_type': 'CreateByUser', 'cancel_type': '', 'order_status': 'PartiallyFilled', 'leaves_qty': 99399, 'cum_exec_qty': 601, 'cum_exec_value': '0.05641335', 'cum_exec_fee': '-0.00001407', 'timestamp': '2020-09-15T00:33:03.842Z', 'take_profit': '0', 'stop_loss': '0', 'trailing_stop': '0', 'last_exec_price': '10653.5'}]}
{'topic': 'execution', 'data': [{'symbol': 'BTCUSD', 'side': 'Sell', 'order_id': 'e9d1e2f3-40e9-4ee5-86b3-d647dac59b72', 'exec_id': '1365d0a1-7fcb-512f-bf15-f4e48106e532', 'order_link_id': '', 'price': '10653.5', 'order_qty': 100000, 'exec_type': 'Trade', 'exec_qty': 100, 'exec_fee': '-0.00000234', 'leaves_qty': 99399, 'is_maker': True, 'trade_time': '2020-09-15T00:33:03.842Z'}]}
{'topic': 'position', 'data': [{'user_id': 733028, 'symbol': 'BTCUSD', 'size': 99399, 'side': 'Buy', 'position_value': '9.33017318', 'entry_price': '10653.5000429', 'liq_price': '6777', 'bust_price': '6755.5', 'leverage': '100', 'order_margin': '0', 'position_margin': '0.09330174', 'available_balance': '5.29056864', 'take_profit': '0', 'stop_loss': '0', 'realised_pnl': '0.00236068', 'trailing_stop': '0', 'trailing_active': '0', 'wallet_balance': '5.39490573', 'risk_id': 1, 'occ_closing_fee': '0.01103535', 'occ_funding_fee': '0', 'auto_add_margin': 1, 'cum_realised_pnl': '-0.74256417', 'position_status': 'Normal', 'position_seq': 1697729776}]}
{'topic': 'order', 'data': [{'order_id': 'e9d1e2f3-40e9-4ee5-86b3-d647dac59b72', 'order_link_id': '', 'symbol': 'BTCUSD', 'side': 'Sell', 'order_type': 'Limit', 'price': '10653.5', 'qty': 100000, 'time_in_force': 'GoodTillCancel', 'create_type': 'CreateByUser', 'cancel_type': '', 'order_status': 'PartiallyFilled', 'leaves_qty': 99299, 'cum_exec_qty': 701, 'cum_exec_value': '0.06579993', 'cum_exec_fee': '-0.00001641', 'timestamp': '2020-09-15T00:33:05.009Z', 'take_profit': '0', 'stop_loss': '0', 'trailing_stop': '0', 'last_exec_price': '10653.5'}]}
{'topic': 'position', 'data': [{'user_id': 733028, 'symbol': 'BTCUSD', 'size': 99299, 'side': 'Buy', 'position_value': '9.3207866', 'entry_price': '10653.5000429', 'liq_price': '6774.5', 'bust_price': '6753', 'leverage': '100', 'order_margin': '0', 'position_margin': '0.09320787', 'available_balance': '5.29067187', 'take_profit': '0', 'stop_loss': '0', 'realised_pnl': '0.00236302', 'trailing_stop': '0', 'trailing_active': '0', 'wallet_balance': '5.39490807', 'risk_id': 1, 'occ_closing_fee': '0.01102833', 'occ_funding_fee': '0', 'auto_add_margin': 1, 'cum_realised_pnl': '-0.74256183', 'position_status': 'Normal', 'position_seq': 1697729776}]}
{'topic': 'execution', 'data': [{'symbol': 'BTCUSD', 'side': 'Sell', 'order_id': 'e9d1e2f3-40e9-4ee5-86b3-d647dac59b72', 'exec_id': 'ee15e126-36f7-58f8-a153-ae47a67dcffb', 'order_link_id': '', 'price': '10653.5', 'order_qty': 100000, 'exec_type': 'Trade', 'exec_qty': 100, 'exec_fee': '-0.00000234', 'leaves_qty': 99299, 'is_maker': True, 'trade_time': '2020-09-15T00:33:05.009Z'}]}
{'topic': 'execution', 'data': [{'symbol': 'BTCUSD', 'side': 'Sell', 'order_id': 'e9d1e2f3-40e9-4ee5-86b3-d647dac59b72', 'exec_id': '85a1ec1d-172f-51d9-8c0f-1b7db2dbd778', 'order_link_id': '', 'price': '10653.5', 'order_qty': 100000, 'exec_type': 'Trade', 'exec_qty': 100, 'exec_fee': '-0.00000234', 'leaves_qty': 99199, 'is_maker': True, 'trade_time': '2020-09-15T00:33:05.884Z'}]}
{'topic': 'order', 'data': [{'order_id': 'e9d1e2f3-40e9-4ee5-86b3-d647dac59b72', 'order_link_id': '', 'symbol': 'BTCUSD', 'side': 'Sell', 'order_type': 'Limit', 'price': '10653.5', 'qty': 100000, 'time_in_force': 'GoodTillCancel', 'create_type': 'CreateByUser', 'cancel_type': '', 'order_status': 'PartiallyFilled', 'leaves_qty': 99199, 'cum_exec_qty': 801, 'cum_exec_value': '0.07518651', 'cum_exec_fee': '-0.00001875', 'timestamp': '2020-09-15T00:33:05.884Z', 'take_profit': '0', 'stop_loss': '0', 'trailing_stop': '0', 'last_exec_price': '10653.5'}]}
{'topic': 'position', 'data': [{'user_id': 733028, 'symbol': 'BTCUSD', 'size': 99199, 'side': 'Buy', 'position_value': '9.31140002', 'entry_price': '10653.5000429', 'liq_price': '6772', 'bust_price': '6750.5', 'leverage': '100', 'order_margin': '0', 'position_margin': '0.09311401', 'available_balance': '5.2907751', 'take_profit': '0', 'stop_loss': '0', 'realised_pnl': '0.00236536', 'trailing_stop': '0', 'trailing_active': '0', 'wallet_balance': '5.39491041', 'risk_id': 1, 'occ_closing_fee': '0.0110213', 'occ_funding_fee': '0', 'auto_add_margin': 1, 'cum_realised_pnl': '-0.74255949', 'position_status': 'Normal', 'position_seq': 1697729776}]}
{'topic': 'execution', 'data': [{'symbol': 'BTCUSD', 'side': 'Sell', 'order_id': 'e9d1e2f3-40e9-4ee5-86b3-d647dac59b72', 'exec_id': 'bb79355e-b4a0-55b9-bc12-f595b61fb33a', 'order_link_id': '', 'price': '10653.5', 'order_qty': 100000, 'exec_type': 'Trade', 'exec_qty': 100, 'exec_fee': '-0.00000234', 'leaves_qty': 99099, 'is_maker': True, 'trade_time': '2020-09-15T00:33:07.851Z'}]}
{'topic': 'order', 'data': [{'order_id': 'e9d1e2f3-40e9-4ee5-86b3-d647dac59b72', 'order_link_id': '', 'symbol': 'BTCUSD', 'side': 'Sell', 'order_type': 'Limit', 'price': '10653.5', 'qty': 100000, 'time_in_force': 'GoodTillCancel', 'create_type': 'CreateByUser', 'cancel_type': '', 'order_status': 'PartiallyFilled', 'leaves_qty': 99099, 'cum_exec_qty': 901, 'cum_exec_value': '0.08457309', 'cum_exec_fee': '-0.00002109', 'timestamp': '2020-09-15T00:33:07.851Z', 'take_profit': '0', 'stop_loss': '0', 'trailing_stop': '0', 'last_exec_price': '10653.5'}]}
{'topic': 'position', 'data': [{'user_id': 733028, 'symbol': 'BTCUSD', 'size': 99099, 'side': 'Buy', 'position_value': '9.30201344', 'entry_price': '10653.5000429', 'liq_price': '6769.5', 'bust_price': '6748', 'leverage': '100', 'order_margin': '0', 'position_margin': '0.09302014', 'available_balance': '5.29087834', 'take_profit': '0', 'stop_loss': '0', 'realised_pnl': '0.0023677', 'trailing_stop': '0', 'trailing_active': '0', 'wallet_balance': '5.39491275', 'risk_id': 1, 'occ_closing_fee': '0.01101427', 'occ_funding_fee': '0', 'auto_add_margin': 1, 'cum_realised_pnl': '-0.74255715', 'position_status': 'Normal', 'position_seq': 1697729776}]}
{'topic': 'order', 'data': [{'order_id': 'e9d1e2f3-40e9-4ee5-86b3-d647dac59b72', 'order_link_id': '', 'symbol': 'BTCUSD', 'side': 'Sell', 'order_type': 'Limit', 'price': '10653.5', 'qty': 100000, 'time_in_force': 'GoodTillCancel', 'create_type': 'CreateByUser', 'cancel_type': '', 'order_status': 'PartiallyFilled', 'leaves_qty': 98999, 'cum_exec_qty': 1001, 'cum_exec_value': '0.09395967', 'cum_exec_fee': '-0.00002343', 'timestamp': '2020-09-15T00:33:08.914Z', 'take_profit': '0', 'stop_loss': '0', 'trailing_stop': '0', 'last_exec_price': '10653.5'}]}
{'topic': 'execution', 'data': [{'symbol': 'BTCUSD', 'side': 'Sell', 'order_id': 'e9d1e2f3-40e9-4ee5-86b3-d647dac59b72', 'exec_id': '55f19236-11ce-5e0c-95bc-462e33db6da8', 'order_link_id': '', 'price': '10653.5', 'order_qty': 100000, 'exec_type': 'Trade', 'exec_qty': 100, 'exec_fee': '-0.00000234', 'leaves_qty': 98999, 'is_maker': True, 'trade_time': '2020-09-15T00:33:08.914Z'}]}
{'topic': 'position', 'data': [{'user_id': 733028, 'symbol': 'BTCUSD', 'size': 98999, 'side': 'Buy', 'position_value': '9.29262686', 'entry_price': '10653.5000429', 'liq_price': '6767', 'bust_price': '6745.5', 'leverage': '100', 'order_margin': '0', 'position_margin': '0.09292627', 'available_balance': '5.29098159', 'take_profit': '0', 'stop_loss': '0', 'realised_pnl': '0.00237004', 'trailing_stop': '0', 'trailing_active': '0', 'wallet_balance': '5.39491509', 'risk_id': 1, 'occ_closing_fee': '0.01100723', 'occ_funding_fee': '0', 'auto_add_margin': 1, 'cum_realised_pnl': '-0.74255481', 'position_status': 'Normal', 'position_seq': 1697729776}]}
{'topic': 'order', 'data': [{'order_id': 'e9d1e2f3-40e9-4ee5-86b3-d647dac59b72', 'order_link_id': '', 'symbol': 'BTCUSD', 'side': 'Sell', 'order_type': 'Limit', 'price': '10653.5', 'qty': 100000, 'time_in_force': 'GoodTillCancel', 'create_type': 'CreateByUser', 'cancel_type': '', 'order_status': 'PartiallyFilled', 'leaves_qty': 98899, 'cum_exec_qty': 1101, 'cum_exec_value': '0.10334625', 'cum_exec_fee': '-0.00002577', 'timestamp': '2020-09-15T00:33:09.605Z', 'take_profit': '0', 'stop_loss': '0', 'trailing_stop': '0', 'last_exec_price': '10653.5'}]}
{'topic': 'position', 'data': [{'user_id': 733028, 'symbol': 'BTCUSD', 'size': 98899, 'side': 'Buy', 'position_value': '9.28324028', 'entry_price': '10653.5000429', 'liq_price': '6764.5', 'bust_price': '6743', 'leverage': '100', 'order_margin': '0', 'position_margin': '0.09283241', 'available_balance': '5.29108483', 'take_profit': '0', 'stop_loss': '0', 'realised_pnl': '0.00237238', 'trailing_stop': '0', 'trailing_active': '0', 'wallet_balance': '5.39491743', 'risk_id': 1, 'occ_closing_fee': '0.01100019', 'occ_funding_fee': '0', 'auto_add_margin': 1, 'cum_realised_pnl': '-0.74255247', 'position_status': 'Normal', 'position_seq': 1697729776}]}
{'topic': 'execution', 'data': [{'symbol': 'BTCUSD', 'side': 'Sell', 'order_id': 'e9d1e2f3-40e9-4ee5-86b3-d647dac59b72', 'exec_id': 'a473f71f-9878-515f-a3f7-e0cd70e9a2b4', 'order_link_id': '', 'price': '10653.5', 'order_qty': 100000, 'exec_type': 'Trade', 'exec_qty': 100, 'exec_fee': '-0.00000234', 'leaves_qty': 98899, 'is_maker': True, 'trade_time': '2020-09-15T00:33:09.605Z'}]}
{'topic': 'order', 'data': [{'order_id': 'e9d1e2f3-40e9-4ee5-86b3-d647dac59b72', 'order_link_id': '', 'symbol': 'BTCUSD', 'side': 'Sell', 'order_type': 'Limit', 'price': '10653.5', 'qty': 100000, 'time_in_force': 'GoodTillCancel', 'create_type': 'CreateByUser', 'cancel_type': '', 'order_status': 'PartiallyFilled', 'leaves_qty': 76709, 'cum_exec_qty': 23291, 'cum_exec_value': '2.1862298', 'cum_exec_fee': '-0.00054649', 'timestamp': '2020-09-15T00:33:10.233Z', 'take_profit': '0', 'stop_loss': '0', 'trailing_stop': '0', 'last_exec_price': '10653.5'}]}
{'topic': 'position', 'data': [{'user_id': 733028, 'symbol': 'BTCUSD', 'size': 76709, 'side': 'Buy', 'position_value': '7.20035672', 'entry_price': '10653.5000429', 'liq_price': '6112.5', 'bust_price': '6095', 'leverage': '100', 'order_margin': '0', 'position_margin': '0.07200357', 'available_balance': '5.31399541', 'take_profit': '0', 'stop_loss': '0', 'realised_pnl': '0.00289311', 'trailing_stop': '0', 'trailing_active': '0', 'wallet_balance': '5.39543816', 'risk_id': 1, 'occ_closing_fee': '0.00943918', 'occ_funding_fee': '0', 'auto_add_margin': 1, 'cum_realised_pnl': '-0.74203174', 'position_status': 'Normal', 'position_seq': 1697729776}]}
{'topic': 'execution', 'data': [{'symbol': 'BTCUSD', 'side': 'Sell', 'order_id': 'e9d1e2f3-40e9-4ee5-86b3-d647dac59b72', 'exec_id': '83daed9e-17b8-576b-8bc5-0ae28a9e8b4c', 'order_link_id': '', 'price': '10653.5', 'order_qty': 100000, 'exec_type': 'Trade', 'exec_qty': 22190, 'exec_fee': '-0.00052072', 'leaves_qty': 76709, 'is_maker': True, 'trade_time': '2020-09-15T00:33:10.233Z'}]}
{'topic': 'order', 'data': [{'order_id': 'e9d1e2f3-40e9-4ee5-86b3-d647dac59b72', 'order_link_id': '', 'symbol': 'BTCUSD', 'side': 'Sell', 'order_type': 'Limit', 'price': '10653.5', 'qty': 100000, 'time_in_force': 'GoodTillCancel', 'create_type': 'CreateByUser', 'cancel_type': '', 'order_status': 'PartiallyFilled', 'leaves_qty': 76609, 'cum_exec_qty': 23391, 'cum_exec_value': '2.19561638', 'cum_exec_fee': '-0.00054883', 'timestamp': '2020-09-15T00:33:10.453Z', 'take_profit': '0', 'stop_loss': '0', 'trailing_stop': '0', 'last_exec_price': '10653.5'}]}
{'topic': 'execution', 'data': [{'symbol': 'BTCUSD', 'side': 'Sell', 'order_id': 'e9d1e2f3-40e9-4ee5-86b3-d647dac59b72', 'exec_id': 'ce82d9f3-636a-57c1-853d-f9bb97da2682', 'order_link_id': '', 'price': '10653.5', 'order_qty': 100000, 'exec_type': 'Trade', 'exec_qty': 100, 'exec_fee': '-0.00000234', 'leaves_qty': 76609, 'is_maker': True, 'trade_time': '2020-09-15T00:33:10.453Z'}]}
{'topic': 'position', 'data': [{'user_id': 733028, 'symbol': 'BTCUSD', 'size': 76609, 'side': 'Buy', 'position_value': '7.19097014', 'entry_price': '10653.5000429', 'liq_price': '6109', 'bust_price': '6091.5', 'leverage': '100', 'order_margin': '0', 'position_margin': '0.07190971', 'available_balance': '5.3140985', 'take_profit': '0', 'stop_loss': '0', 'realised_pnl': '0.00289545', 'trailing_stop': '0', 'trailing_active': '0', 'wallet_balance': '5.3954405', 'risk_id': 1, 'occ_closing_fee': '0.00943229', 'occ_funding_fee': '0', 'auto_add_margin': 1, 'cum_realised_pnl': '-0.7420294', 'position_status': 'Normal', 'position_seq': 1697729776}]}
{'topic': 'execution', 'data': [{'symbol': 'BTCUSD', 'side': 'Sell', 'order_id': 'e9d1e2f3-40e9-4ee5-86b3-d647dac59b72', 'exec_id': '1a48e875-806d-556d-b70c-36838a968861', 'order_link_id': '', 'price': '10653.5', 'order_qty': 100000, 'exec_type': 'Trade', 'exec_qty': 100, 'exec_fee': '-0.00000234', 'leaves_qty': 76509, 'is_maker': True, 'trade_time': '2020-09-15T00:33:11.210Z'}]}
{'topic': 'order', 'data': [{'order_id': 'e9d1e2f3-40e9-4ee5-86b3-d647dac59b72', 'order_link_id': '', 'symbol': 'BTCUSD', 'side': 'Sell', 'order_type': 'Limit', 'price': '10653.5', 'qty': 100000, 'time_in_force': 'GoodTillCancel', 'create_type': 'CreateByUser', 'cancel_type': '', 'order_status': 'PartiallyFilled', 'leaves_qty': 76509, 'cum_exec_qty': 23491, 'cum_exec_value': '2.20500296', 'cum_exec_fee': '-0.00055117', 'timestamp': '2020-09-15T00:33:11.210Z', 'take_profit': '0', 'stop_loss': '0', 'trailing_stop': '0', 'last_exec_price': '10653.5'}]}
{'topic': 'position', 'data': [{'user_id': 733028, 'symbol': 'BTCUSD', 'size': 76509, 'side': 'Buy', 'position_value': '7.18158356', 'entry_price': '10653.5000429', 'liq_price': '6105.5', 'bust_price': '6088', 'leverage': '100', 'order_margin': '0', 'position_margin': '0.07181584', 'available_balance': '5.31420161', 'take_profit': '0', 'stop_loss': '0', 'realised_pnl': '0.00289779', 'trailing_stop': '0', 'trailing_active': '0', 'wallet_balance': '5.39544284', 'risk_id': 1, 'occ_closing_fee': '0.00942539', 'occ_funding_fee': '0', 'auto_add_margin': 1, 'cum_realised_pnl': '-0.74202706', 'position_status': 'Normal', 'position_seq': 1697729776}]}
{'topic': 'order', 'data': [{'order_id': 'e9d1e2f3-40e9-4ee5-86b3-d647dac59b72', 'order_link_id': '', 'symbol': 'BTCUSD', 'side': 'Sell', 'order_type': 'Limit', 'price': '10653.5', 'qty': 100000, 'time_in_force': 'GoodTillCancel', 'create_type': 'CreateByUser', 'cancel_type': '', 'order_status': 'PartiallyFilled', 'leaves_qty': 71509, 'cum_exec_qty': 28491, 'cum_exec_value': '2.67433228', 'cum_exec_fee': '-0.0006685', 'timestamp': '2020-09-15T00:33:19.511Z', 'take_profit': '0', 'stop_loss': '0', 'trailing_stop': '0', 'last_exec_price': '10653.5'}]}
{'topic': 'execution', 'data': [{'symbol': 'BTCUSD', 'side': 'Sell', 'order_id': 'e9d1e2f3-40e9-4ee5-86b3-d647dac59b72', 'exec_id': '0d8276a6-3c27-5624-bc4b-8ed9f60eb789', 'order_link_id': '', 'price': '10653.5', 'order_qty': 100000, 'exec_type': 'Trade', 'exec_qty': 5000, 'exec_fee': '-0.00011733', 'leaves_qty': 71509, 'is_maker': True, 'trade_time': '2020-09-15T00:33:19.511Z'}]}
{'topic': 'position', 'data': [{'user_id': 733028, 'symbol': 'BTCUSD', 'size': 71509, 'side': 'Buy', 'position_value': '6.71225423', 'entry_price': '10653.5000429', 'liq_price': '5927', 'bust_price': '5910.5', 'leverage': '100', 'order_margin': '0', 'position_margin': '0.06712255', 'available_balance': '5.31936365', 'take_profit': '0', 'stop_loss': '0', 'realised_pnl': '0.00301513', 'trailing_stop': '0', 'trailing_active': '0', 'wallet_balance': '5.39556018', 'risk_id': 1, 'occ_closing_fee': '0.00907398', 'occ_funding_fee': '0', 'auto_add_margin': 1, 'cum_realised_pnl': '-0.74190972', 'position_status': 'Normal', 'position_seq': 1697729776}]}
{'topic': 'order', 'data': [{'order_id': 'e9d1e2f3-40e9-4ee5-86b3-d647dac59b72', 'order_link_id': '', 'symbol': 'BTCUSD', 'side': 'Sell', 'order_type': 'Limit', 'price': '10653.5', 'qty': 100000, 'time_in_force': 'GoodTillCancel', 'create_type': 'CreateByUser', 'cancel_type': '', 'order_status': 'PartiallyFilled', 'leaves_qty': 51509, 'cum_exec_qty': 48491, 'cum_exec_value': '4.55164959', 'cum_exec_fee': '-0.00113782', 'timestamp': '2020-09-15T00:33:31.073Z', 'take_profit': '0', 'stop_loss': '0', 'trailing_stop': '0', 'last_exec_price': '10653.5'}]}
{'topic': 'position', 'data': [{'user_id': 733028, 'symbol': 'BTCUSD', 'size': 51509, 'side': 'Buy', 'position_value': '4.83493691', 'entry_price': '10653.5000429', 'liq_price': '5050.5', 'bust_price': '5038.5', 'leverage': '100', 'order_margin': '0', 'position_margin': '0.04834937', 'available_balance': '5.34001282', 'take_profit': '0', 'stop_loss': '0', 'realised_pnl': '0.00348446', 'trailing_stop': '0', 'trailing_active': '0', 'wallet_balance': '5.39602951', 'risk_id': 1, 'occ_closing_fee': '0.00766732', 'occ_funding_fee': '0', 'auto_add_margin': 1, 'cum_realised_pnl': '-0.74144039', 'position_status': 'Normal', 'position_seq': 1697729776}]}
{'topic': 'execution', 'data': [{'symbol': 'BTCUSD', 'side': 'Sell', 'order_id': 'e9d1e2f3-40e9-4ee5-86b3-d647dac59b72', 'exec_id': '096268f5-6848-586d-83e8-417de63ccf16', 'order_link_id': '', 'price': '10653.5', 'order_qty': 100000, 'exec_type': 'Trade', 'exec_qty': 20000, 'exec_fee': '-0.00046932', 'leaves_qty': 51509, 'is_maker': True, 'trade_time': '2020-09-15T00:33:31.073Z'}]}
{'topic': 'order', 'data': [{'order_id': 'e9d1e2f3-40e9-4ee5-86b3-d647dac59b72', 'order_link_id': '', 'symbol': 'BTCUSD', 'side': 'Sell', 'order_type': 'Limit', 'price': '10653.5', 'qty': 100000, 'time_in_force': 'GoodTillCancel', 'create_type': 'CreateByUser', 'cancel_type': '', 'order_status': 'PartiallyFilled', 'leaves_qty': 51381, 'cum_exec_qty': 48619, 'cum_exec_value': '4.56366442', 'cum_exec_fee': '-0.00114082', 'timestamp': '2020-09-15T00:33:31.122Z', 'take_profit': '0', 'stop_loss': '0', 'trailing_stop': '0', 'last_exec_price': '10653.5'}]}
{'topic': 'position', 'data': [{'user_id': 733028, 'symbol': 'BTCUSD', 'size': 51381, 'side': 'Buy', 'position_value': '4.82292208', 'entry_price': '10653.5000429', 'liq_price': '5044', 'bust_price': '5032', 'leverage': '100', 'order_margin': '0', 'position_margin': '0.04822923', 'available_balance': '5.34014514', 'take_profit': '0', 'stop_loss': '0', 'realised_pnl': '0.00348746', 'trailing_stop': '0', 'trailing_active': '0', 'wallet_balance': '5.39603251', 'risk_id': 1, 'occ_closing_fee': '0.00765814', 'occ_funding_fee': '0', 'auto_add_margin': 1, 'cum_realised_pnl': '-0.74143739', 'position_status': 'Normal', 'position_seq': 1697729776}]}
{'topic': 'execution', 'data': [{'symbol': 'BTCUSD', 'side': 'Sell', 'order_id': 'e9d1e2f3-40e9-4ee5-86b3-d647dac59b72', 'exec_id': '655c3a7b-32a2-5afa-9927-f1d19d282d5a', 'order_link_id': '', 'price': '10653.5', 'order_qty': 100000, 'exec_type': 'Trade', 'exec_qty': 128, 'exec_fee': '-0.000003', 'leaves_qty': 51381, 'is_maker': True, 'trade_time': '2020-09-15T00:33:31.122Z'}]}
{'topic': 'order', 'data': [{'order_id': 'e9d1e2f3-40e9-4ee5-86b3-d647dac59b72', 'order_link_id': '', 'symbol': 'BTCUSD', 'side': 'Sell', 'order_type': 'Limit', 'price': '10653.5', 'qty': 100000, 'time_in_force': 'GoodTillCancel', 'create_type': 'CreateByUser', 'cancel_type': '', 'order_status': 'PartiallyFilled', 'leaves_qty': 50631, 'cum_exec_qty': 49369, 'cum_exec_value': '4.63406381', 'cum_exec_fee': '-0.00115841', 'timestamp': '2020-09-15T00:33:38.150Z', 'take_profit': '0', 'stop_loss': '0', 'trailing_stop': '0', 'last_exec_price': '10653.5'}]}
{'topic': 'position', 'data': [{'user_id': 733028, 'symbol': 'BTCUSD', 'size': 50631, 'side': 'Buy', 'position_value': '4.75252269', 'entry_price': '10653.5000429', 'liq_price': '5004.5', 'bust_price': '4993', 'leverage': '100', 'order_margin': '0', 'position_margin': '0.04752523', 'available_balance': '5.34091957', 'take_profit': '0', 'stop_loss': '0', 'realised_pnl': '0.00350505', 'trailing_stop': '0', 'trailing_active': '0', 'wallet_balance': '5.3960501', 'risk_id': 1, 'occ_closing_fee': '0.0076053', 'occ_funding_fee': '0', 'auto_add_margin': 1, 'cum_realised_pnl': '-0.7414198', 'position_status': 'Normal', 'position_seq': 1697729776}]}
{'topic': 'execution', 'data': [{'symbol': 'BTCUSD', 'side': 'Sell', 'order_id': 'e9d1e2f3-40e9-4ee5-86b3-d647dac59b72', 'exec_id': '30581b06-7eb6-59c9-8325-d8715d66eb3f', 'order_link_id': '', 'price': '10653.5', 'order_qty': 100000, 'exec_type': 'Trade', 'exec_qty': 750, 'exec_fee': '-0.00001759', 'leaves_qty': 50631, 'is_maker': True, 'trade_time': '2020-09-15T00:33:38.150Z'}]}
{'topic': 'order', 'data': [{'order_id': 'e9d1e2f3-40e9-4ee5-86b3-d647dac59b72', 'order_link_id': '', 'symbol': 'BTCUSD', 'side': 'Sell', 'order_type': 'Limit', 'price': '10653.5', 'qty': 100000, 'time_in_force': 'GoodTillCancel', 'create_type': 'CreateByUser', 'cancel_type': '', 'order_status': 'PartiallyFilled', 'leaves_qty': 50630, 'cum_exec_qty': 49370, 'cum_exec_value': '4.63415767', 'cum_exec_fee': '-0.00115843', 'timestamp': '2020-09-15T00:34:02.140Z', 'take_profit': '0', 'stop_loss': '0', 'trailing_stop': '0', 'last_exec_price': '10653.5'}]}
{'topic': 'execution', 'data': [{'symbol': 'BTCUSD', 'side': 'Sell', 'order_id': 'e9d1e2f3-40e9-4ee5-86b3-d647dac59b72', 'exec_id': '810bfb0e-d282-5461-ae32-72d117b304dd', 'order_link_id': '', 'price': '10653.5', 'order_qty': 100000, 'exec_type': 'Trade', 'exec_qty': 1, 'exec_fee': '-0.00000002', 'leaves_qty': 50630, 'is_maker': True, 'trade_time': '2020-09-15T00:34:02.140Z'}]}
{'topic': 'position', 'data': [{'user_id': 733028, 'symbol': 'BTCUSD', 'size': 50630, 'side': 'Buy', 'position_value': '4.75242883', 'entry_price': '10653.5000429', 'liq_price': '5004.5', 'bust_price': '4993', 'leverage': '100', 'order_margin': '0', 'position_margin': '0.04752429', 'available_balance': '5.34092068', 'take_profit': '0', 'stop_loss': '0', 'realised_pnl': '0.00350507', 'trailing_stop': '0', 'trailing_active': '0', 'wallet_balance': '5.39605012', 'risk_id': 1, 'occ_closing_fee': '0.00760515', 'occ_funding_fee': '0', 'auto_add_margin': 1, 'cum_realised_pnl': '-0.74141978', 'position_status': 'Normal', 'position_seq': 1697729776}]}
{'topic': 'order', 'data': [{'order_id': 'e9d1e2f3-40e9-4ee5-86b3-d647dac59b72', 'order_link_id': '', 'symbol': 'BTCUSD', 'side': 'Sell', 'order_type': 'Limit', 'price': '10653.5', 'qty': 100000, 'time_in_force': 'GoodTillCancel', 'create_type': 'CreateByUser', 'cancel_type': '', 'order_status': 'PartiallyFilled', 'leaves_qty': 10946, 'cum_exec_qty': 89054, 'cum_exec_value': '8.35913068', 'cum_exec_fee': '-0.00208967', 'timestamp': '2020-09-15T00:34:02.306Z', 'take_profit': '0', 'stop_loss': '0', 'trailing_stop': '0', 'last_exec_price': '10653.5'}]}
{'topic': 'position', 'data': [{'user_id': 733028, 'symbol': 'BTCUSD', 'size': 10946, 'side': 'Buy', 'position_value': '1.02745578', 'entry_price': '10653.5000429', 'liq_price': '1706.5', 'bust_price': '1705.5', 'leverage': '100', 'order_margin': '0', 'position_margin': '0.01027456', 'available_balance': '5.38189329', 'take_profit': '0', 'stop_loss': '0', 'realised_pnl': '0.00443635', 'trailing_stop': '0', 'trailing_active': '0', 'wallet_balance': '5.3969814', 'risk_id': 1, 'occ_closing_fee': '0.00481355', 'occ_funding_fee': '0', 'auto_add_margin': 1, 'cum_realised_pnl': '-0.7404885', 'position_status': 'Normal', 'position_seq': 1697729776}]}
{'topic': 'execution', 'data': [{'symbol': 'BTCUSD', 'side': 'Sell', 'order_id': 'e9d1e2f3-40e9-4ee5-86b3-d647dac59b72', 'exec_id': '70778e45-3c87-5ff4-9da5-b88fff89a7a3', 'order_link_id': '', 'price': '10653.5', 'order_qty': 100000, 'exec_type': 'Trade', 'exec_qty': 39684, 'exec_fee': '-0.00093124', 'leaves_qty': 10946, 'is_maker': True, 'trade_time': '2020-09-15T00:34:02.306Z'}]}
{'topic': 'execution', 'data': [{'symbol': 'BTCUSD', 'side': 'Sell', 'order_id': 'e9d1e2f3-40e9-4ee5-86b3-d647dac59b72', 'exec_id': '1ec17405-11bc-5752-8d11-9820081f2d18', 'order_link_id': '', 'price': '10653.5', 'order_qty': 100000, 'exec_type': 'Trade', 'exec_qty': 1, 'exec_fee': '-0.00000002', 'leaves_qty': 10945, 'is_maker': True, 'trade_time': '2020-09-15T00:34:02.394Z'}]}
{'topic': 'order', 'data': [{'order_id': 'e9d1e2f3-40e9-4ee5-86b3-d647dac59b72', 'order_link_id': '', 'symbol': 'BTCUSD', 'side': 'Sell', 'order_type': 'Limit', 'price': '10653.5', 'qty': 100000, 'time_in_force': 'GoodTillCancel', 'create_type': 'CreateByUser', 'cancel_type': '', 'order_status': 'PartiallyFilled', 'leaves_qty': 10945, 'cum_exec_qty': 89055, 'cum_exec_value': '8.35922454', 'cum_exec_fee': '-0.00208969', 'timestamp': '2020-09-15T00:34:02.394Z', 'take_profit': '0', 'stop_loss': '0', 'trailing_stop': '0', 'last_exec_price': '10653.5'}]}
{'topic': 'position', 'data': [{'user_id': 733028, 'symbol': 'BTCUSD', 'size': 10945, 'side': 'Buy', 'position_value': '1.02736192', 'entry_price': '10653.5000429', 'liq_price': '1706.5', 'bust_price': '1705', 'leverage': '100', 'order_margin': '0', 'position_margin': '0.01027362', 'available_balance': '5.38189328', 'take_profit': '0', 'stop_loss': '0', 'realised_pnl': '0.00443637', 'trailing_stop': '0', 'trailing_active': '0', 'wallet_balance': '5.39698142', 'risk_id': 1, 'occ_closing_fee': '0.00481452', 'occ_funding_fee': '0', 'auto_add_margin': 1, 'cum_realised_pnl': '-0.74048848', 'position_status': 'Normal', 'position_seq': 1697729776}]}
{'topic': 'order', 'data': [{'order_id': 'e9d1e2f3-40e9-4ee5-86b3-d647dac59b72', 'order_link_id': '', 'symbol': 'BTCUSD', 'side': 'Sell', 'order_type': 'Limit', 'price': '10653.5', 'qty': 100000, 'time_in_force': 'GoodTillCancel', 'create_type': 'CreateByUser', 'cancel_type': '', 'order_status': 'PartiallyFilled', 'leaves_qty': 8445, 'cum_exec_qty': 91555, 'cum_exec_value': '8.5938892', 'cum_exec_fee': '-0.00214835', 'timestamp': '2020-09-15T00:34:04.801Z', 'take_profit': '0', 'stop_loss': '0', 'trailing_stop': '0', 'last_exec_price': '10653.5'}]}
{'topic': 'execution', 'data': [{'symbol': 'BTCUSD', 'side': 'Sell', 'order_id': 'e9d1e2f3-40e9-4ee5-86b3-d647dac59b72', 'exec_id': '6cb41c0b-9f66-5037-af6c-7d097ba8de46', 'order_link_id': '', 'price': '10653.5', 'order_qty': 100000, 'exec_type': 'Trade', 'exec_qty': 2500, 'exec_fee': '-0.00005866', 'leaves_qty': 8445, 'is_maker': True, 'trade_time': '2020-09-15T00:34:04.801Z'}]}
{'topic': 'position', 'data': [{'user_id': 733028, 'symbol': 'BTCUSD', 'size': 8445, 'side': 'Buy', 'position_value': '0.79269726', 'entry_price': '10653.5000429', 'liq_price': '1366.5', 'bust_price': '1365.5', 'leverage': '100', 'order_margin': '0', 'position_margin': '0.00792698', 'available_balance': '5.38447468', 'take_profit': '0', 'stop_loss': '0', 'realised_pnl': '0.00449503', 'trailing_stop': '0', 'trailing_active': '0', 'wallet_balance': '5.39704008', 'risk_id': 1, 'occ_closing_fee': '0.00463842', 'occ_funding_fee': '0', 'auto_add_margin': 1, 'cum_realised_pnl': '-0.74042982', 'position_status': 'Normal', 'position_seq': 1697729776}]}
{'topic': 'execution', 'data': [{'symbol': 'BTCUSD', 'side': 'Sell', 'order_id': 'e9d1e2f3-40e9-4ee5-86b3-d647dac59b72', 'exec_id': '782cad37-9aa7-5e45-b574-b757b136529e', 'order_link_id': '', 'price': '10653.5', 'order_qty': 100000, 'exec_type': 'Trade', 'exec_qty': 36, 'exec_fee': '-0.00000084', 'leaves_qty': 8409, 'is_maker': True, 'trade_time': '2020-09-15T00:34:05.660Z'}]}
{'topic': 'position', 'data': [{'user_id': 733028, 'symbol': 'BTCUSD', 'size': 8409, 'side': 'Buy', 'position_value': '0.78931809', 'entry_price': '10653.5000429', 'liq_price': '1361.5', 'bust_price': '1360.5', 'leverage': '100', 'order_margin': '0', 'position_margin': '0.00789319', 'available_balance': '5.38451211', 'take_profit': '0', 'stop_loss': '0', 'realised_pnl': '0.00449587', 'trailing_stop': '0', 'trailing_active': '0', 'wallet_balance': '5.39704092', 'risk_id': 1, 'occ_closing_fee': '0.00463562', 'occ_funding_fee': '0', 'auto_add_margin': 1, 'cum_realised_pnl': '-0.74042898', 'position_status': 'Normal', 'position_seq': 1697729776}]}
{'topic': 'order', 'data': [{'order_id': 'e9d1e2f3-40e9-4ee5-86b3-d647dac59b72', 'order_link_id': '', 'symbol': 'BTCUSD', 'side': 'Sell', 'order_type': 'Limit', 'price': '10653.5', 'qty': 100000, 'time_in_force': 'GoodTillCancel', 'create_type': 'CreateByUser', 'cancel_type': '', 'order_status': 'PartiallyFilled', 'leaves_qty': 8409, 'cum_exec_qty': 91591, 'cum_exec_value': '8.59726837', 'cum_exec_fee': '-0.00214919', 'timestamp': '2020-09-15T00:34:05.660Z', 'take_profit': '0', 'stop_loss': '0', 'trailing_stop': '0', 'last_exec_price': '10653.5'}]}
{'topic': 'order', 'data': [{'order_id': 'e9d1e2f3-40e9-4ee5-86b3-d647dac59b72', 'order_link_id': '', 'symbol': 'BTCUSD', 'side': 'Sell', 'order_type': 'Limit', 'price': '10653.5', 'qty': 100000, 'time_in_force': 'GoodTillCancel', 'create_type': 'CreateByUser', 'cancel_type': '', 'order_status': 'Filled', 'leaves_qty': 0, 'cum_exec_qty': 100000, 'cum_exec_value': '9.38658643', 'cum_exec_fee': '-0.00234651', 'timestamp': '2020-09-15T00:34:38.832Z', 'take_profit': '0', 'stop_loss': '0', 'trailing_stop': '0', 'last_exec_price': '10653.5'}]}
{'topic': 'execution', 'data': [{'symbol': 'BTCUSD', 'side': 'Sell', 'order_id': 'e9d1e2f3-40e9-4ee5-86b3-d647dac59b72', 'exec_id': '683a8dd0-7d9f-5fa8-9731-502f5831b5d7', 'order_link_id': '', 'price': '10653.5', 'order_qty': 100000, 'exec_type': 'Trade', 'exec_qty': 8409, 'exec_fee': '-0.00019732', 'leaves_qty': 0, 'is_maker': True, 'trade_time': '2020-09-15T00:34:38.832Z'}]}
{'topic': 'position', 'data': [{'user_id': 733028, 'symbol': 'BTCUSD', 'size': 0, 'side': 'None', 'position_value': '0', 'entry_price': '0', 'liq_price': '0', 'bust_price': '0', 'leverage': '100', 'order_margin': '0', 'position_margin': '0', 'available_balance': '5.39723827', 'take_profit': '0', 'stop_loss': '0', 'realised_pnl': '0.00469322', 'trailing_stop': '0', 'trailing_active': '0', 'wallet_balance': '5.39723827', 'risk_id': 1, 'occ_closing_fee': '0', 'occ_funding_fee': '0', 'auto_add_margin': 1, 'cum_realised_pnl': '-0.74023163', 'position_status': 'Normal', 'position_seq': 1697729776}]}
'''

'''
{'topic': 'order', 'data': [{'order_id': '1bb4d196-be87-4235-9f88-570e49c0cc81', 'order_link_id': '', 'symbol': 'BTCUSD', 'side': 'Buy', 'order_type': 'Limit', 'price': '10898.5', 'qty': 1000, 'time_in_force': 'GoodTillCancel', 'create_type': 'CreateByUser', 'cancel_type': 'CancelByUser', 'order_status': 'Cancelled', 'leaves_qty': 0, 'cum_exec_qty': 0, 'cum_exec_value': '0', 'cum_exec_fee': '0', 'timestamp': '2020-09-15T13:23:27.314Z', 'take_profit': '0', 'stop_loss': '0', 'trailing_stop': '0', 'last_exec_price': '0'}]}
'''


class PrivateWS:
    def __init__(self):
        PrivateWSData.initialize()
        # True
        websocket.enableTrace(True)
        # URLWebSocketApp
        self.ws = websocket.WebSocketApp(url='wss://stream.bybit.com/realtime',
                                    on_open=self.on_open,
                                    on_message=self.on_message,
                                    on_close=self.on_close,
                                    on_error=self.on_error,
                                    keep_running=True)
        self.thread = threading.Thread(target=lambda: self.ws.run_forever())
        self.thread.daemon = True
        self.thread.start()
        print(websocket.WebSocket.getstatus)


    def signature(self, expires, secret) -> str:
        _val = 'GET/realtime' + str(expires)
        return str(hmac.new(bytes(secret, "utf-8"), bytes(_val, "utf-8"), digestmod="sha256").hexdigest())

    def on_open(self):
        print('opened bybit private ws.')
        api_info = open('./ignore/api.json', "r")
        json_data = json.load(api_info)  # JSON
        id = json_data['id']
        secret = json_data['secret']
        api_info.close()
        expires = str(int(round(time.time())+1))+"000"
        signature = self.signature(expires, secret)
        auth = {
            'op': 'auth',
            'args': [id, expires, signature]
        }
        self.ws.send(json.dumps(auth))

        channels = {
            'op': 'subscribe',
            'args': [
                'position',
                'execution',
                'order',
                'stop_order',
            ]
        }
        self.ws.send(json.dumps(channels))

    def on_message(self, message):
        message = json.loads(message)
        print(message)
        if 'table' in message.keys():
            if message['topic'] == 'execution':
                d = message['data']
            elif message['topic'] == 'order':
                for d in message['data']:
                    #Account.process_execution(d['order_id'], d['leaves_qty'], 0 if d['order_status'] == 'New' else d['exec_qty'], d['last_exec_price'], d['order_type'], d['status'])
                    PrivateWSData.add_order_data(d)
                    #print(d)
            elif message['topic'] == 'position':
                d = message['data']

    def on_close(self):
        print('closed private PrivateWS')
        self.__init__()

    def on_error(self, error):
        print('PrivateWS error!', error)


class PrivateWSData:
    @classmethod
    def initialize(cls):
        cls.lock_order_data = threading.Lock()
        cls.order_data = []
        #cls.order_data = deque()

    @classmethod
    def add_order_data(cls, data):
        with cls.lock_order_data:
            cls.order_data.append(data)
            print(cls.order_data)

    '''
    getrecordbotorder id
    '''
    @classmethod
    def get_order_data(cls):
        with cls.lock_order_data:
            if len(cls.lock_order_data) > 0:
                d = cls.lock_order_data
                del cls.lock_order_data
                return d
            else:
                return None

    '''
    @classmethod
    def add_order_data(cls, data):
        with cls.lock_order_data:
            cls.order_data.append(data)

    @classmethod
    def get_order_data(cls):
        with cls.lock_order_data:
            if len(cls.order_data) > 0:
                return cls.order_data.popleft()
            return None
    '''


if __name__ == '__main__':
    SystemFlg.initialize()
    Account.initialize()
    pws = PrivateWS()
    while True:
        time.sleep(1)